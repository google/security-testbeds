# Intel(R) Neural Compressor CVE-2024-22476

This directory contains the deployment config for Intel(R) Neural Compressor instances vulnerable and fixed to CVE-2024-22476. Instances before version 2.5.0 may allow an unauthenticated user to potentially enable escalation of privilege via remote access.

## Vulnerable setup

```
docker build -t neuralcompressor:vuln -f Vulnerable.Dockerfile .
docker run --name neuralcompressor-vuln --network host -it neuralcompressor:vuln bash
neural_solution --conda_env test start (In the container bash)
```

Application will be available at `localhost:8000`

## Non-vulnerable setup

```
docker build -t neuralcompressor:fixed -f Fixed.Dockerfile .
docker run --name neuralcompressor-fixed --network host -it neuralcompressor:fixed bash
neural_solution --conda_env test start (In the container bash)
```

Application will be available at `localhost:8000`

To trigger the vulnerability, you can use the curl and task_request.json file. In a vulnerable environment, the curl request below will create a file called attack.py under the root directory of the container.

```
curl -X POST -H "Content-Type: application/json" --data @./task_request.json  http://127.0.0.1:8000/task/submit/
```

In case you cannot trigger the vulnerability, you might need to delete your existing container images because Docker might try to reuse them.

```
sudo docker rmi -f $(sudo docker images -aq)
sudo docker remove $(sudo docker ps -a -q)
```
