# Atlassian BitBucket CVE-2022-36804

## Description of Vulnerability

A vulnerability(CVE-2022-36804) in Bitbucket allows a remote code execution.
An attacker with access with read or public access to a
repository can execute arbitrary code by sending a malicious
HTTP request. All versions released after 6.10.17
including 7.0.0 and newer are affected, this means that all
instances that are running any versions between 7.0.0 and
8.3.0 inclusive can be exploited by this vulnerability.

## Vulnerable setup

1. download image and run the container

```sh
docker run  --name="tsunami-bitbucket-8-3" -d -p 37990:7990 -p 37999:7999 atlassian/bitbucket:8.3.0
```

2. The instance will be available on port 37990
3. Install bitbucket, fill license code and create the administrator account
4. Create a public repository (Repository settings > Repository permissions > Public Access)
5. Add at least one file to the repository
6. Ensure a default branch is selected

## Non-vulnerable setup

Only the version of the bitbucket container needs to be changed:

```sh
docker run  --name="tsunami-bitbucket-8-3" -d -p 37990:7990 -p 37999:7999 atlassian/bitbucket:8.3.1
```
