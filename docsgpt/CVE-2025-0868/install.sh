#!/bin/bash

# Check parameter
if [ "$1" == "vuln" ]; then
    VERSION="0.12.0"
elif [ "$1" == "fixed" ]; then
    VERSION="0.13.0"
else
    echo "Usage: $0 [vuln|fixed]"
    exit 1
fi

# Download the correct version
ZIP_NAME="DocsGPT-$VERSION.zip"
URL="https://github.com/arc53/DocsGPT/archive/refs/tags/$VERSION.zip"

echo "Downloading DocsGPT version $VERSION..."
curl -L -o "$ZIP_NAME" "$URL"

# Unzip
unzip "$ZIP_NAME"

# Enter the directory
DIR_NAME="DocsGPT-$VERSION"
cd "$DIR_NAME" || { echo "Failed to enter directory $DIR_NAME"; exit 1; }

# Make setup.sh executable
chmod +x setup.sh

# Run setup.sh with input "1"
echo 1 | ./setup.sh

